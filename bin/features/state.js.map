{"version":3,"file":"state.js","names":["State","_colorToIndex","W","U","B","R","G","constructor","cardObjects","Map","cardAmounts","colorData","color","count","costData","cost","addCard","card","get","id","undefined","set","type_line","includes","deckUpdate","statUpdate","_changeCosts","cmc","_changeColors","color_identity","amount","removeCard","delete","length"],"sources":["../../src/features/state.js"],"sourcesContent":["class State {\r\n    static _colorToIndex = {\r\n        W: 0,\r\n        U: 1,\r\n        B: 2,\r\n        R: 3,\r\n        G: 4\r\n    };\r\n\r\n    constructor() {\r\n        this.cardObjects = new Map();\r\n        this.cardAmounts = new Map();\r\n        this.colorData = [\r\n            { color: 'White', count: 0 },\r\n            { color: 'Blue', count: 0 },\r\n            { color: 'Black', count: 0 },\r\n            { color: 'Red', count: 0 },\r\n            { color: 'Green', count: 0 },\r\n            { color: 'Colorless', count: 0 }\r\n        ];\r\n        this.costData = [\r\n            { cost: 0, count: 0 },\r\n            { cost: 1, count: 0 },\r\n            { cost: 2, count: 0 },\r\n            { cost: 3, count: 0 },\r\n            { cost: 4, count: 0 },\r\n            { cost: 5, count: 0 },\r\n            { cost: 6, count: 0 },\r\n            { cost: '7+', count: 0}\r\n        ];\r\n    }\r\n\r\n    addCard(card) {\r\n        if (this.cardObjects.get(card.id) === undefined) {\r\n            this.cardObjects.set(card.id, card);\r\n            this.cardAmounts.set(card.id, 1);\r\n\r\n            if (card.type_line.includes('Basic')) {\r\n                return {deckUpdate: true, statUpdate: false};\r\n            }\r\n\r\n            this._changeCosts(card.cmc, 1);\r\n            this._changeColors(card.color_identity, 1);\r\n            return {deckUpdate: true, statUpdate: true};\r\n        }\r\n\r\n        const amount = this.cardAmounts.get(card.id) + 1;\r\n        if (card.type_line.includes('Basic')) {\r\n            this.cardAmounts.set(card.id, amount);\r\n            return {deckUpdate: true, statUpdate: false};\r\n        }\r\n\r\n        if (amount <= 4) {\r\n            this.cardAmounts.set(card.id, amount);\r\n            this._changeCosts(card.cmc, 1);\r\n            this._changeColors(card.color_identity, 1);\r\n            return {deckUpdate: true, statUpdate: true};\r\n        }\r\n\r\n        return {deckUpdate: false, statUpdate: false};\r\n    }\r\n\r\n    removeCard(card) {\r\n        if (this.cardObjects.get(card.id) === undefined) {\r\n            return {deckUpdate: false, statUpdate: false};\r\n        }\r\n\r\n        const amount = this.cardAmounts.get(card.id) - 1;\r\n        if (amount <= 0) {\r\n            this.cardObjects.delete(card.id);\r\n            this.cardAmounts.delete(card.id);\r\n        }\r\n        else this.cardAmounts.set(card.id, amount);\r\n\r\n        if (card.type_line.includes('Basic'))\r\n            return {deckUpdate: true, statUpdate: false};\r\n\r\n        this._changeCosts(card.cmc, -1);\r\n        this._changeColors(card.color_identity, -1);\r\n        return {deckUpdate: true, statUpdate: true};\r\n    }\r\n\r\n    _changeCosts(cmc, amount) {\r\n        cmc >= 7 ? this.costData[7].count += amount : this.costData[cmc].count += amount ;\r\n    }\r\n\r\n    _changeColors(color_identity, amount) {\r\n        if (color_identity.length === 0) {\r\n            this.colorData[5].count += amount;\r\n            return;\r\n        }\r\n\r\n        for (const color of color_identity) {\r\n            this.colorData[State._colorToIndex[color]].count += amount;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    State\r\n}"],"mappings":"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","ignoreList":[]}